<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rabbit Cage Management</title>
    <link rel="stylesheet" href="styles.css">
    <script>
        const cages = [];

        function toggleProfileFields() {
            const profile = document.getElementById('profile').value;
            document.getElementById('doeFields').style.display = profile === 'doe' ? 'block' : 'none';
            document.getElementById('fattenerSection').style.display = profile === 'fattener' ? 'block' : 'none';
            document.getElementById('breederSection').style.display = profile === 'breeder' ? 'block' : 'none';

            // Reset messages and inputs when switching profiles
            document.getElementById('breederEligibilityMessage').style.display = 'none';
            document.getElementById('breederNotReadyMessage').style.display = 'none';
        }

        function checkBreederReadiness() {
            const dob = new Date(document.getElementById('dateOfBirthBreeder').value);
            const currentDate = new Date();
            const ageInMonths = (currentDate - dob) / (1000 * 60 * 60 * 24 * 30);
            
            const eligibilityMessage = document.getElementById('breederEligibilityMessage');
            const notReadyMessage = document.getElementById('breederNotReadyMessage');

            if (ageInMonths >= 6) {
                eligibilityMessage.style.display = 'block';
                notReadyMessage.style.display = 'none';
            } else {
                eligibilityMessage.style.display = 'none';
                notReadyMessage.style.display = 'block';
            }
        }

        function goHome() {
            document.getElementById('cageDetails').style.display = 'none';
            document.getElementById('homePage').style.display = 'block';
        }

        function goBack() {
            document.getElementById('homePage').style.display = 'none';
            document.getElementById('cageDetails').style.display = 'block';
        }

        function saveData(event) {
            event.preventDefault();
            const profile = document.getElementById('profile').value;

            const serialNumber = document.getElementById(`serialNumber${profile.charAt(0).toUpperCase() + profile.slice(1)}`).value;
            const breeds = document.getElementById(`breeds${profile.charAt(0).toUpperCase() + profile.slice(1)}`).value;
            const age = document.getElementById(`age${profile.charAt(0).toUpperCase() + profile.slice(1)}`).value;
            const dateOfBirth = document.getElementById(`dateOfBirth${profile.charAt(0).toUpperCase() + profile.slice(1)}`).value;
            const gender = document.getElementById(`gender${profile.charAt(0).toUpperCase() + profile.slice(1)}`).value;
            const family = document.getElementById(`family${profile.charAt(0).toUpperCase() + profile.slice(1)}`).value;
            const foodIntake = document.querySelector(`input[name="foodIntake${profile.charAt(0).toUpperCase() + profile.slice(1)}"]:checked`).value;
            const weight = document.getElementById(`weight${profile.charAt(0).toUpperCase() + profile.slice(1)}`).value;

            // Add data to cages array
            cages.push({ serialNumber, breeds, age, dateOfBirth, gender, family, foodIntake, weight, profile });
            displayCages();
            clearForm();
        }

        function displayCages() {
            const cageList = document.getElementById('cageList');
            cageList.innerHTML = '';

            cages.forEach((cage, index) => {
                const li = document.createElement('li');
                li.textContent = `Cage ${index + 1}: Serial Number: ${cage.serialNumber}, Profile: ${cage.profile}`;
                
                const deleteButton = document.createElement('button');
                deleteButton.textContent = 'Delete';
                deleteButton.onclick = () => deleteCage(index);
                
                li.appendChild(deleteButton);
                cageList.appendChild(li);
            });
        }

        function clearForm() {
            document.getElementById('rabbitForm').reset();
            toggleProfileFields();
        }

        function deleteCage(index) {
            cages.splice(index, 1);
            displayCages();
        }
    </script>
</head>
<body>
    <header>
        <button onclick="goHome()">&#x1F3E0;</button>
        <span>Rabbit Cage Management</span>
    </header>

    <div id="homePage">
        <h2>Welcome to Rabbit Cage Management</h2>
        <button onclick="goToCageDetails()">Manage Cages</button>
    </div>

    <div id="cageDetails" style="display: none;">
        <form id="rabbitForm" onsubmit="saveData(event)">
            <!-- Profile Selector -->
            <div>
                <label for="profile">RABBIT PROFILE:</label>
                <select id="profile" name="profile" onchange="toggleProfileFields()">
                    <option value="doe">Rabbit Doe</option>
                    <option value="fattener">Rabbit Fattener</option>
                    <option value="breeder">Rabbit Breeder</option>
                </select>
            </div>

            <!-- Rabbit Doe Fields -->
            <div id="doeFields" style="display: none;">
                <div>
                    <label for="serialNumberDoe">SERIAL NUMBER:</label>
                    <input type="text" id="serialNumberDoe" name="serialNumberDoe">
                </div>
                <div>
                    <label for="ageDoe">AGE:</label>
                    <input type="text" id="ageDoe" name="ageDoe">
                </div>
                <div>
                    <label for="dateOfBirthDoe">DATE OF BIRTH:</label>
                    <input type="date" id="dateOfBirthDoe" name="dateOfBirthDoe">
                </div>
                <div>
                    <label for="genderDoe">GENDER:</label>
                    <select id="genderDoe" name="genderDoe" required>
                        <option value="male">Male</option>
                        <option value="female">Female</option>
                    </select>
                </div>
                <div>
                    <label for="familyDoe">RABBIT FAMILY:</label>
                    <input type="text" id="familyDoe" name="familyDoe">
                </div>
                <div>
                    <label for="foodIntakeDoe">FOOD INTAKE:</label>
                    <label><input type="radio" name="foodIntakeDoe" value="normal"> NORMAL</label>
                    <label><input type="radio" name="foodIntakeDoe" value="irregular"> IRREGULAR</label>
                </div>
                <div>
                    <label for="weightDoe">WEIGHT:</label>
                    <input type="text" id="weightDoe" name="weightDoe">
                </div>
                <div id="pregnantSection" style="display: block;">
                    <label>PREGNANT:</label>
                    <label><input type="radio" name="pregnantDoe" value="yes" onclick="togglePregnancyDetails(true)"> YES</label>
                    <label><input type="radio" name="pregnantDoe" value="no" onclick="togglePregnancyDetails(false)"> NO</label>
                    <div id="pregnancyDetails" style="display: none;">
                        <div>
                            <label for="pregnancyStartDoe">START OF PREGNANCY:</label>
                            <input type="date" id="pregnancyStartDoe" name="pregnancyStartDoe" onchange="calculateDueDate('Doe')">
                        </div>
                        <div>
                            <label for="dueDateDoe">DUE DATE OF PREGNANCY:</label>
                            <input type="text" id="dueDateDoe" name="dueDateDoe" readonly>
                        </div>
                    </div>
                    <div id="notReadyMessage" style="display: none;">
                        <p>This rabbit is not ready for pregnancy.</p>
                    </div>
                </div>
            </div>

            <!-- Rabbit Fattener Section -->
            <div id="fattenerSection" style="display: none;">
                <div>
                    <label for="serialNumberFattener">SERIAL NUMBER:</label>
                    <input type="text" id="serialNumberFattener" name="serialNumberFattener" required>
                </div>
                <div>
                    <label for="breedsFattener">BREEDS:</label>
                    <input type="text" id="breedsFattener" name="breedsFattener">
                </div>
                <div>
                    <label for="ageFattener">AGE:</label>
                    <input type="text" id="ageFattener" name="ageFattener">
                </div>
                <div>
                    <label for="dateOfBirthFattener">DATE OF BIRTH:</label>
                    <input type="date" id="dateOfBirthFattener" name="dateOfBirthFattener" onchange="checkBreederReadiness()">
                </div>
                <div>
                    <label for="genderFattener">GENDER:</label>
                    <select id="genderFattener" name="genderFattener" required>
                        <option value="male">Male</option>
                        <option value="female">Female</option>
                    </select>
                </div>
                <div>
                    <label for="familyFattener">RABBIT FAMILY:</label>
                    <input type="text" id="familyFattener" name="familyFattener">
                </div>
                <div>
                    <label for="foodIntakeFattener">FOOD INTAKE:</label>
                    <label><input type="radio" name="foodIntakeFattener" value="normal"> NORMAL</label>
                    <label><input type="radio" name="foodIntakeFattener" value="irregular"> IRREGULAR</label>
                </div>
                <div>
                    <label for="weightFattener">WEIGHT:</label>
                    <input type="text" id="weightFattener" name="weightFattener">
                </div>
            </div>

            <!-- Rabbit Breeder Section -->
            <div id="breederSection" style="display: none;">
                <div>
                    <label for="serialNumberBreeder">SERIAL NUMBER:</label>
                    <input type="text" id="serialNumberBreeder" name="serialNumberBreeder" required>
                </div>
                <div>
                    <label for="breedsBreeder">BREEDS:</label>
                    <input type="text" id="breedsBreeder" name="breedsBreeder">
                </div>
                <div>
                    <label for="ageBreeder">AGE:</label>
                    <input type="text" id="ageBreeder" name="ageBreeder">
                </div>
                <div>
                    <label for="dateOfBirthBreeder">DATE OF BIRTH:</label>
                    <input type="date" id="dateOfBirthBreeder" name="dateOfBirthBreeder" onchange="checkBreederReadiness()">
                </div>
                <div>
                    <label for="genderBreeder">GENDER:</label>
                    <select id="genderBreeder" name="genderBreeder" required>
                        <option value="male">Male</option>
                        <option value="female">Female</option>
                    </select>
                </div>
                <div>
                    <label for="familyBreeder">RABBIT FAMILY:</label>
                    <input type="text" id="familyBreeder" name="familyBreeder">
                </div>
                <div>
                    <label for="foodIntakeBreeder">FOOD INTAKE:</label>
                    <label><input type="radio" name="foodIntakeBreeder" value="normal"> NORMAL</label>
                    <label><input type="radio" name="foodIntakeBreeder" value="irregular"> IRREGULAR</label>
                </div>
                <div>
                    <label for="weightBreeder">WEIGHT:</label>
                    <input type="text" id="weightBreeder" name="weightBreeder">
                </div>
                <div id="breederEligibilityMessage" style="display: none;">
                    <p>This rabbit is eligible for mating.</p>
                </div>
                <div id="breederNotReadyMessage" style="display: none;">
                    <p>This rabbit is not eligible for mating.</p>
                </div>
            </div>

            <!-- Save and Clear buttons -->
            <div>
                <button type="submit">SAVE</button>
                <button type="button" onclick="clearForm()">CLEAR</button>
            </div>
        </form>

        <!-- Cage Management Section -->
        <h2>Manage Rabbit Cages</h2>
        <div>
            <button onclick="addCage()">ADD CAGE</button>
            <ul id="cageList"></ul>
        </div>
        <button onclick="goBack()">BACK</button>
    </div>
</body>
</html>
